<form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">

  <!-- Email -->
  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Email Address</mat-label>
    <input matInput type="email" formControlName="email" required>
    <mat-error *ngIf="forgotPasswordForm.get('email')?.hasError('required')">
      Email is required
    </mat-error>
    <mat-error *ngIf="forgotPasswordForm.get('email')?.hasError('email')">
      Enter a valid email
    </mat-error>
  </mat-form-field>

  <!-- Mobile -->
  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Mobile Number</mat-label>
    <input matInput type="text" formControlName="mobileNumber" required>
    <mat-error *ngIf="forgotPasswordForm.get('mobileNumber')?.hasError('required')">
      Mobile number is required
    </mat-error>
    <mat-error *ngIf="forgotPasswordForm.get('mobileNumber')?.hasError('pattern')">
      Enter a valid 10-digit mobile number
    </mat-error>
  </mat-form-field>

  <!-- OTP Section -->
  <div *ngIf="otpSent">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Enter OTP</mat-label>
      <input matInput type="text" formControlName="otp" required>
      <mat-error *ngIf="forgotPasswordForm.get('otp')?.hasError('required')">
        OTP is required
      </mat-error>
      <mat-error *ngIf="forgotPasswordForm.get('otp')?.hasError('pattern')">
        Enter valid 6-digit OTP
      </mat-error>
    </mat-form-field>

    <!-- New Password -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>New Password</mat-label>
      <input matInput type="password" formControlName="newPassword" required>
    </mat-form-field>

    <!-- Confirm Password -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Confirm Password</mat-label>
      <input matInput type="password" formControlName="confirmPassword" required>
      <mat-error *ngIf="forgotPasswordForm.errors?.['mismatch']">
        Passwords do not match
      </mat-error>
    </mat-form-field>
  </div>

  <!-- Buttons -->
  <div class="button-group">
    <button mat-raised-button color="primary" type="button" (click)="sendOtp()" [disabled]="loading">
      {{ loading ? 'Sending...' : 'Send OTP' }}
    </button>

    <button mat-raised-button color="accent" type="submit" [disabled]="forgotPasswordForm.invalid || loading || !otpSent">
      {{ loading ? 'Processing...' : 'Reset Password' }}
    </button>
  </div>
</form>

<!-- Messages -->
<div *ngIf="message" class="success">{{ message }}</div>
<div *ngIf="error" class="error">{{ error }}</div>
